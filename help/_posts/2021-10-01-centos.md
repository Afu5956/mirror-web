---
category: help
layout: help
mirrorid: centos
---

CentOS Mirror guide
===================

> This only provides CentOS 7 and 8, and it means specifically  `x86_64`.

### Back up configuration files or directories
It is recommended to back up the directory `/etc/yum.repos.d/`.
```shell
zip -r /etc/yum.repos.d  ~/yum.repos.d.`date +%Y%m%d`.backup
```

Then edit the relevant files in `/etc/yum.repos.d/`, add `#` before the beginning line of `mirrorlist=` to comment out;
add `baseurl=` start line to uncomment
(If it is commented), replace the domain name in the line (such as `mirror.centos.org`) with the `{{ site.hostname }}`.

### CentOS 7
```shell
sed -e 's|^mirrorlist=|#mirrorlist=|g' \
         -e 's|^#baseurl=http://mirror.centos.org/centos|baseurl=https://{{ site.hostname }}/centos|g' \
         -i.bak \
         /etc/yum.repos.d/CentOS-Base.repo
```


### CentOS 8
```shell
sed -e 's|^mirrorlist=|#mirrorlist=|g' \
-e 's|^#baseurl=http://mirror.centos.org/$contentdir|baseurl=https://{{ site.hostname }}/centos|g' \
-i.bak \
/etc/yum.repos.d/CentOS-Linux-AppStream.repo \
/etc/yum.repos.d/CentOS-Linux-BaseOS.repo \
/etc/yum.repos.d/CentOS-Linux-Extras.repo \
/etc/yum.repos.d/CentOS-Linux-PowerTools.repo \
/etc/yum.repos.d/CentOS-Linux-Plus.repo
```

Then you can directly execute the command to install the software.

> _I run the above steps in the `root` user terminal. For non-root users, please run as a user with sudo privileges._
